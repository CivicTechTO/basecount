(function(){var global=window;if(global.module==undefined)global.module=function(r,E){var x=global[r];if(x==undefined)global[r]=x={};E(x)};
module("Charts",function(r){var E;E=function(){function f(a){var b,c,d,e;c={};e=f.DEFAULTS;for(b in e){d=e[b];c[b]=d}for(b in a){d=a[b];if(a.hasOwnProperty(b))c[b]=d}return c}f.DEFAULTS={dot_size:5,dot_color:"#00aadd",dot_stroke_color:"#fff",dot_stroke_size:2,line_width:3,line_color:"#00aadd",smoothing:0.4,fill_area:true,area_color:"#00aadd",area_opacity:0.2,show_x_labels:true,show_y_labels:true,label_max:true,label_min:true,max_x_labels:10,max_y_labels:3,font_family:"Helvetica, Arial, sans-serif",
x_label_size:14,y_label_size:14,label_format:"%m/%d",label_color:"#333",show_grid:false,x_padding:45,y_padding:40,multi_axis:false,scale:"linear",y_axis_scale:[],render:"line",bar_width:20};f.merge=function(a,b){var c,d,e;if(a==null)a={};if(b==null)b={};d={};for(c in a){e=a[c];d[c]=e}for(c in b){e=b[c];if(b.hasOwnProperty(c))d[c]=e}return d};return f}();var x;x=function(){function f(){}f.clone=function(a){var b,c;if(!(a!=null&&typeof a==="object"))return a;b=new a.constructor;for(c in a)b[c]=f.clone(a[c]);
return b};f.comma=function(a){var b,c,d;d=a.toString();a="";b=0;for(c=d.length-1;c>=0;){a+=d.charAt(b);if(c%3===0&&c!==0)a+=",";b++;c--}return a};f.commas=function(a){a=a.toString().split(".");return a.length===1?this.comma(a[0]):this.comma(a[0])+"."+a[1]};return f}();var y,C,L,M,N;L=function(f){switch(f){case 1:return"Jan";case 2:return"Feb";case 3:return"Mar";case 4:return"Apr";case 5:return"May";case 6:return"Jun";case 7:return"Jul";case 8:return"Aug";case 9:return"Sep";case 10:return"Oct";case 11:return"Nov";
case 12:return"Dec"}};N=function(f,a){var b;if(a==null)a=2;b=a>0?Math.pow(10,a):1;return x.commas(Math.round(f*b)/b)};M=function(f,a){var b,c;if(a==null)a=2;c=a>0?Math.pow(10,a):1;if(f>1E6){b=f/1E6;b=Math.round(b*c)/c;return b+"m"}else if(f>1E3){b=f/1E3;return Math.round(b*c)/c+"k"}else return Math.round(f*c)/c};C=function(){function f(a,b){this.r=a;this.format=b!=null?b:"";this.num=0;this.font_family="Helvetica, Arial, sans-serif"}f.prototype.x=function(a){this.x_func=a;return this};f.prototype.y=
function(a){this.y_func=a;return this};f.prototype.size=function(a){this.size=a;return this};f.prototype.attr=function(a){this.options=a;return this};f.prototype.color=function(a){this.color=a;return this};f.prototype.draw=function(a){if(!this.color)this.color="#333";a=new y(this.r,this.x_func(this.num),this.y_func(this.num),a,this.format,this.size,this.font_family,this.color,this.options);this.num+=1;return a.draw()};return f}();y=function(){function f(a,b,c,d,e,g,h,i,j){this.r=a;this.x=b;this.y=
c;this.text=d;this.format=e!=null?e:"";this.size=g!=null?g:14;this.font_family=h!=null?h:"Helvetica, Arial, sans-serif";this.color=i!=null?i:"#333";this.options=j!=null?j:void 0}f.prototype.is_date=function(a){return Object.prototype.toString.call(a)==="[object Date]"};f.prototype.parse_date=function(){var a,b,c,d,e;b=this.format.match(/%([a-zA-Z])/g);a=this.format;d=0;for(e=b.length;d<e;d++){c=b[d];a=a.replace(c,this.parse_format(c))}return a};f.prototype.meridian_indicator=function(a){return a.getHours()>=
12?"pm":"am"};f.prototype.to_12_hour_clock=function(a){a=a.getHours()%12;return a===0?12:a};f.prototype.fmt_minutes=function(a){a=a.getMinutes();return a<10?"0"+a:a};f.prototype.parse_format=function(a){switch(a){case "%m":return this.text.getMonth()+1;case "%b":return L(this.text.getMonth()+1);case "%d":return this.text.getDate();case "%Y":return this.text.getFullYear();case "%H":return this.text.getHours();case "%M":return this.fmt_minutes(this.text);case "%I":return this.to_12_hour_clock(this.text);
case "%p":return this.meridian_indicator(this.text)}};f.prototype.draw=function(){var a;this.element=this.r.text(this.x,this.y,this.is_date(this.text)?this.parse_date(this.text):typeof this.text==="number"?N(this.text):this.text);a=this.element.getBBox().width;this.element.attr({fill:this.color,"font-size":this.size,"font-weight":"normal","text-anchor":"middle","font-family":this.font_family});if(this.options!=null)this.element.attr(this.options);else{a=this.x<a?a/2+5:this.x;this.element.attr({x:a})}return this.element};
return f}();(function(){function f(a,b,c,d,e){this.r=a;this.width=b;this.height=c;this.points=d;this.options=e}f.prototype.draw=function(){var a,b,c,d,e,g,h,i,j;a=Math.round(this.points.length/this.options.step_size);b=this.height-this.options.y_padding;e=this.width-this.options.x_padding;h=Math.round(b/a);g=this.options.y_padding;d=this.r.set();j=this.points;c=i=0;for(j=j.length;i<j;c=++i)if(c%this.options.step_size===0){c=this.points[c].x;d.push(this.r.path("M "+c+", "+this.options.y_padding+" L "+
c+", "+b+" Z"))}for(i=0;0<=a?i<=a:i>=a;0<=a?++i:--i){g<=b&&d.push(this.r.path("M "+this.options.x_padding+", "+g+" L "+e+", "+g+" Z"));g+=h}return d.attr({stroke:"#ccc","stroke-width":1}).toBack()};return f})();var O;O=function(){function f(a,b,c,d){this.r=a;this.point=b;this.opts=c;this.scale_factor=d!=null?d:1.5;this.element=this.r.circle(b.x,b.y,this.opts.dot_size);this.style_dot();this.opts.hover_enabled&&this.attach_handlers()}f.prototype.style_dot=function(){this.element.attr({fill:this.opts.dot_color,
stroke:this.opts.dot_stroke_color,"stroke-width":this.opts.dot_stroke_size});return this.element.toFront()};f.prototype.activate=function(){this.element.attr({fill:"#333"});return this.element.animate({r:this.opts.dot_size*this.scale_factor},200)};f.prototype.deactivate=function(){this.element.attr({fill:this.opts.dot_color});return this.element.animate({r:this.opts.dot_size},200)};f.prototype.attach_handlers=function(){this.element.mouseover(function(a){return function(){return a.activate()}}(this));
return this.element.mouseout(function(a){return function(){return a.deactivate()}}(this))};f.prototype.hide=function(){return this.element.hide()};return f}();var P;P=function(){function f(a){var b,c,d,e;c={};e=f.DEFAULTS;for(b in e){d=e[b];c[b]=d}for(b in a){d=a[b];if(a.hasOwnProperty(b))c[b]=d}return c}f.DEFAULTS={line_width:4,line_color:"#000",area_color:"#00aadd",area_width:20,area_opacity:0.2,bar_margin:8,show_average:true,average_width:4,average_height:8,average_color:"#000",font_family:"Helvetica, Arial, sans-serif",
x_label_size:14,y_label_size:14,x_padding:45,y_padding:40};f.merge=function(a,b){var c,d,e;if(a==null)a={};if(b==null)b={};d={};for(c in a){e=a[c];d[c]=e}for(c in b){e=b[c];if(b.hasOwnProperty(c))d[c]=e}return d};return f}();var u;u=function(){function f(a,b){var c,d,e;d={};for(c in b){e=b[c];d[c]=e}for(c in a){e=a[c];if(a.hasOwnProperty(c))d[c]=e}return d}f.merge=function(a,b){var c,d,e;if(a==null)a={};if(b==null)b={};d={};for(c in a){e=a[c];d[c]=e}for(c in b){e=b[c];if(b.hasOwnProperty(c))d[c]=
e}return d};return f}();var Q,t={}.hasOwnProperty,s=function(f,a){function b(){this.constructor=f}for(var c in a)if(t.call(a,c))f[c]=a[c];b.prototype=a.prototype;f.prototype=new b;f.__super__=a.prototype;return f};Q=function(f){function a(b){return a.__super__.constructor.call(this,b,a.DEFAULTS)}s(a,f);a.DEFAULTS={bar_margin:30,bar_bg_color:"#bdced3",bar1_color:"90-#2f5e78-#4284a8",bar2_color:"90-#173e53-#225d7c",raw_value_bar_color:"#9eb7bf",x_padding:160,x_padding_right:100,y_padding:50,bg_bar_padding:14,
rounding:3,dash_width:3,label_size:14,font_family:"Helvetica, Arial, sans-serif"};return a}(u);var F;F=function(){function f(a){var b,c,d,e;c={};e=f.DEFAULTS;for(b in e){d=e[b];c[b]=d}for(b in a){d=a[b];if(a.hasOwnProperty(b))c[b]=d}return c}f.DEFAULTS={bar_width:20,bar_spacing:20,bar_color:"#00aadd",rounding:0,font_family:"Helvetica, Arial, sans-serif",show_x_labels:true,show_y_labels:true,x_label_size:14,x_label_color:"#333",y_label_size:14,y_label_color:"#333",show_grid:false,x_padding:25,y_padding:40};
f.merge=function(a,b){var c,d,e;if(a==null)a={};if(b==null)b={};d={};for(c in a){e=a[c];d[c]=e}for(c in b){e=b[c];if(b.hasOwnProperty(c))d[c]=e}return d};return f}();var G,B,z,R=function(f,a){return function(){return f.apply(a,arguments)}};B=function(){function f(){this.scale=R(this.scale,this)}f.prototype.domain=function(a){this.domain_min=Math.min.apply(Math.min,a);this.domain_max=Math.max.apply(Math.max,a);return this};f.prototype.range=function(a){this.range_min=Math.min.apply(Math.min,a);this.range_max=
Math.max.apply(Math.max,a);return this.scale};f.prototype.scale=function(a){var b;b=this.domain_max-this.domain_min;a=(this.domain_max*this.range_min-this.domain_min*this.range_max)/b+a*((this.range_max-this.range_min)/b);return b===0?this.range_min:a};return f}();G=function(){function f(a){this.base=a!=null?a:10;return this.scale=R(this.scale,this)}f.prototype.scale=function(a){var b;b=Math.log;return b(a)/b(this.base)};return f}();z=function(){function f(){}f.get_ranges_for_points=function(a){var b,
c,d,e,g;c=[];d=[];e=0;for(g=a.length;e<g;e++){b=a[e];c.push(b.x);d.push(b.y)}a=Math.max.apply(Math.max,c);b=Math.max.apply(Math.max,d);c=Math.min.apply(Math.min,c);d=Math.min.apply(Math.min,d);return[a,c,b,d]};f.threshold=function(a,b){return a>b?b:a};return f}();r.Scaling=z;r.Scaler=B;var n;n=function(){function f(a,b,c){this.y=b;this.options=c!=null?c:{};if(this.is_date(a)){this.x=a.getTime();this.is_date_type=true}else this.x=a}f.prototype.is_date=function(a){return Object.prototype.toString.call(a)===
"[object Date]"};return f}();r.Point=n;var H;Raphael.fn.triangle=function(f,a,b){b*=1.75;return this.path("M".concat(f,",",a,"m0-",b*0.58,"l",b*0.5,",",b*0.87,"-",b,",0z"))};H=function(){function f(a){this.r=a}f.prototype.black_nub=function(a,b,c,d,e){var g,h,i,j,k,m;if(b==null)b=10;if(c==null)c=8;if(e==null)e=0;g=a.getBBox();d=g.x;m=g.y;a=g.width;g=g.height;h=d+a/2;k=a+2*b;i=g+2*c;j=this.r.set();j.push(this.r.rect(h-k/2,m-c,k,i,e));j.push(this.r.triangle(d+a+b+2,m+2+0.5*g,4).rotate(90));return j.attr({fill:"#333",
stroke:"none"}).toBack()};f.prototype.straight_line=function(a,b){return this.r.path("M"+a.x+","+a.y+"L"+b.x+","+b.y)};f.prototype.vertical_dashed_line=function(a,b,c,d){var e,g,h;if(c==null)c=3;if(d==null)d=10;g=Math.floor((b.y-a.y)/d);b=this.r.set();e=h=0;for(g=g-1;0<=g?h<=g:h>=g;e=0<=g?++h:--h)if(e%2===0){e=this.r.rect(a.x-0.5*c,e*d+a.y,c,d);b.push(e)}return b};f.prototype.get_points_along_top_of_bbox=function(a,b){var c,d,e;if(b==null)b=0;c=a.getBBox();d=c.x;e=c.x+c.width;c=c.y+b;return[new n(d,
c),new n(e,c)]};f.prototype.one_px_highlight=function(a){a=this.get_points_along_top_of_bbox(a,2);this.straight_line(a[0],a[1]).attr({"stroke-width":1,stroke:"rgba(255,255,255,0.3)"});return this.straight_line};f.prototype.one_px_shadow=function(a){a=this.get_points_along_top_of_bbox(a);this.straight_line(a[0],a[1]).attr({"stroke-width":0.5,stroke:"rgba(0,0,0,0.5)"});return this.straight_line};return f}();r.Effects=H;var D;D=function(){function f(a,b,c,d){var e,g;this.r=a;if(d==null)d=true;if(typeof c===
"number")c=x.commas(Math.round(c*100)/100);e=b.getBBox();g=e.x;a=e.y;e=g+e.width/2;this.text=this.r.text(e,a-22.5,c);this.text.attr({fill:"#fff","font-size":14,"text-anchor":"middle",opacity:0,"font-weight":"bold"});c=this.text.getBBox().width+20;this.popup=this.r.set();this.popup.push(this.r.rect(e-c/2,a-35,c,25,5));this.triangle=this.r.triangle(e,a-10+4,4).rotate(180);this.popup.push(this.triangle);this.popup.attr({fill:"rgba(0,0,0,.4)",opacity:0,stroke:"none"});this.popup.toFront();this.text.toFront();
if(d===true){b.mouseover(function(h){return function(){return h.show()}}(this));b.mouseout(function(h){return function(){return h.hide()}}(this))}}f.prototype.animate_opacity=function(a,b,c){if(c==null)c=200;return a.animate({opacity:b,"fill-opacity":b},c,function(d){return function(){if(b===0){d.text.toBack();return d.popup.toBack()}}}(this))};f.prototype.hide=function(){this.animate_opacity(this.popup,0);return this.animate_opacity(this.text,0)};f.prototype.show=function(){this.popup.toFront();
this.text.toFront();this.animate_opacity(this.popup,0.9);return this.animate_opacity(this.text,1)};f.prototype.translate=function(a,b){this.popup.translate(a,b);this.text.translate(a,b);return this.triangle.translate(-2*a,b)};return f}();r.Tooltip=D;var S;S=function(){function f(a,b,c,d,e,g){this.r=a;this.raw_points=b;this.scaled_points=c;this.height=d;this.width=e;this.options=g!=null?g:{};this.effective_height=this.height-this.options.y_padding;this.x_offset=this.options.bar_width/2}f.prototype.draw=
function(){return this.draw_bars()};f.prototype.draw_bars=function(){var a,b,c,d,e,g,h,i,j,k;e=this.r.set();g=[];c=b=0;k=this.scaled_points;a=i=0;for(j=k.length;i<j;a=++i){d=k[a];h=d.x-this.x_offset;d=this.r.rect(h,d.y,this.options.bar_width,this.effective_height-d.y);e.push(d);g.push(new D(this.r,d,this.raw_points[a].y));if(this.raw_points[a].y>=this.raw_points[b].y)b=a;if(this.raw_points[a].y<this.raw_points[c].y)c=a}e.attr({fill:this.options.line_color,stroke:"none"});this.options.label_max&&g[b].show();
if(this.options.label_min)return g[c].show()};return f}();var I;I=function(){function f(){}f.create_path=function(a,b){var c,d,e,g,h,i;if(b==null)b=0.5;g="M"+a[0].x+", "+a[0].y;e=h=0;for(i=a.length;h<i;e=++h)if(e!==0){d=f.get_control_points(a,e-1,b);c=d[0];d=d[1];g+="C"+c.x+","+c.y+" "+d.x+","+d.y+" "+a[e].x+","+a[e].y}return g};f.get_control_points=function(a,b,c,d){var e,g,h,i;if(d==null)d=3;g=this.get_prev_and_next_points(a,b);e=g[0];g=g[1];b=this.get_prev_and_next_points(a,b+1);a=b[0];h=b[1];
b=this.get_tangent(e,g);e=b[0];b=b[1];i=this.get_tangent(a,h);h=i[0];i=i[1];e=a.x+e*c/d;a=a.y+b*c/d;b=g.x-h*c/d;c=g.y-i*c/d;d=new n(e,a);c=new n(b,c);return[d,c]};f.get_prev_and_next_points=function(a,b){var c,d;d=b-1;c=b+1;if(d<0)d=0;if(c>=a.length)c=a.length-1;return[a[d],a[c]]};f.get_tangent=function(a,b){return[b.x-a.x,b.y-a.y]};return f}();r.Bezier=I;var T;T=function(){function f(a,b,c,d,e,g){this.r=a;this.raw_points=b;this.scaled_points=c;this.height=d;this.width=e;this.options=g!=null?g:{}}
f.prototype.draw=function(){var a;a=I.create_path(this.scaled_points,this.options.smoothing);this.options.fill_area&&this.draw_area(a);this.draw_curve(a);this.options.dot_size>0&&this.draw_dots_and_tooltips(this.scaled_points,this.raw_points)};f.prototype.draw_curve=function(a){return this.r.path(a).attr({stroke:this.options.line_color,"stroke-width":this.options.line_width})};f.prototype.draw_area=function(a){var b,c,d;c=this.scaled_points;d=this.height-this.options.y_padding;b=c[c.length-1];c=c[0];
a+="L "+b.x+", "+d+" ";a+="L "+c.x+", "+d+" ";a+="Z";a=this.r.path(a);a.attr({fill:this.options.area_color,"fill-opacity":this.options.area_opacity,stroke:"none"});return a};f.prototype.draw_dots_and_tooltips=function(){var a,b,c,d,e,g,h,i,j,k,m;i=this.scaled_points;h=this.raw_points;j=[];b=[];c=k=e=d=0;for(m=i.length;k<m;c=++k){a=i[c];g=h[c];if(g.y>=h[d].y)d=c;if(g.y<h[e].y)e=c;c=x.clone(this.options);c.hover_enabled=!g.options.show_dot;a=new O(this.r,a,c);c=new D(this.r,a.element,g.options.tooltip||
g.y,c.hover_enabled);b.push(a);j.push(c);g.options.no_dot===true&&a.hide();if(g.options.show_dot===true){a.activate();c.show()}}if(this.options.label_max){j[d].show();b[d].activate()}if(this.options.label_min){j[e].show();return b[e].activate()}};return f}();var v,U;U=function(f){return f.tagName!==void 0?true:false};v=function(){function f(a,b){var c,d;c=U(a)?a:document.getElementById(a);d=this.get_dimensions(c);this.width=d[0];this.height=d[1];this.r=Raphael(c,this.width,this.height);this.options=
b}f.prototype.get_dimensions=function(a){var b;b=parseInt(a.style.width);a=parseInt(a.style.height);return[b,a]};f.prototype.clear=function(){return this.r.clear()};return f}();var V,W,X,J;t={}.hasOwnProperty;s=function(f,a){function b(){this.constructor=f}for(var c in a)if(t.call(a,c))f[c]=a[c];b.prototype=a.prototype;f.prototype=new b;f.__super__=a.prototype;return f};W=function(f){function a(b){return a.__super__.constructor.call(this,b,a.DEFAULTS)}s(a,f);a.DEFAULTS={main_circle_radius:70,child_radius_multiplier:0.15,
hover_scale_multiplier:1.2,inactive_opacity:0.4,outer_radius_multiplier:1.35,outer_radius2_multiplier:1.5,bounce_radius:1.2,fill_color:"#00a6dd"};return a}(u);J=function(f,a,b){return new n(a*Math.cos(b)+f.x,a*Math.sin(b)+f.y)};X=function(f,a,b,c,d){var e;e=function(g,h,i,j){if(j==null)j=void 0;return g.animate({x:h.x,y:h.y,cx:h.x,cy:h.y},i,"<",j)};return e(f,a,c,function(){return e(f,b,d)})};V=function(f){function a(b,c){if(c==null)c={};a.__super__.constructor.call(this,b,new W(c));this.center_point=
new n(this.width/2,this.height/2);this.main_radius=this.options.main_circle_radius;this.child_radius=this.main_radius*this.options.child_radius_multiplier;this.outer_radius=this.main_radius*this.options.outer_radius_multiplier;this.outer_radius2=this.outer_radius*this.options.outer_radius2_multiplier;this.bounce_radius=this.outer_radius*this.options.bounce_radius;this.children=[]}s(a,f);a.prototype.add_hover=function(b){var c,d;c=function(e){return function(){b[0].animate({r:e.options.hover_scale_multiplier*
e.child_radius,opacity:1,"stroke-width":2,stroke:"rgba(0,0,0,.4)"},200);b[1].animate({"font-size":22,opacity:1,fill:"#fff"},200);return b._label.animate({opacity:1},200)}}(this);d=function(e){return function(){b[0].animate({r:e.child_radius,opacity:e.options.inactive_opacity,stroke:"none","stroke-width":0},200);b[1].animate({opacity:0},200);return b._label.animate({opacity:0},200)}}(this);b._activate=c;b._deactivate=d;return b.hover(c,d)};a.prototype.add=function(b){return this.children.push(b)};
a.prototype.create_circles_along_radius=function(b,c,d,e){var g,h,i,j,k,m,l,o,p;j=2*Math.PI/24;p=[];h=l=0;for(o=b.length;l<o;h=++l){i=b[h];h=h*j;g=J(this.center_point,d,h);k=g.x;m=g.y;g=this.draw_circle(this.center_point.x,this.center_point.y,c,16);g._realx=k;g._realy=m;g._radians=h;g.attr({opacity:this.options.inactive_opacity}).toFront();g[1].attr({opacity:0});this.add_label_to_circle(i,g);this.add_hover(g);p.push(e(i,g))}return p};a.prototype.bounce_circles=function(b,c){var d,e,g,h,i,j,k;if(c){k=
[];h=i=0;for(j=c.length;i<j;h=++i){g=c[h];e=g._radians;d=J(this.center_point,this.bounce_radius,e);e=d.x;d=d.y;e=new n(e,d);if(b._active){d=c.length-h;h=this.center_point;g.toBack()}else{d=h;h=new n(g._realx,g._realy);g.toFront()}d=100+d*10;k.push(X(g,e,h,d,100))}return k}};a.prototype.add_click_to_circle=function(b,c){var d;if(c==null)c=false;d=function(e){return function(){var g,h,i,j,k;if(b._active){b.hover(b._activate,b._deactivate);h=0;if(b._children){k=b._children;i=0;for(j=k.length;i<j;i++){g=
k[i];if(g._active){g._deactivate();g._click_handler()}}}}else{b.unhover(b._activate,b._deactivate);h=45}e.bounce_circles(b,b._children);b.animate({transform:"r"+h},200);return b._active=!b._active}}(this);b._click_handler=d;return b.click(d)};a.prototype.add_label_to_circle=function(b,c){var d,e,g;d=this.r.text(c._realx,c._realy,b.label).attr({"font-size":14});e=this.r.text(c._realx,c._realy+15,M(b.value)).attr({"font-size":12,fill:this.options.fill_color}).toBack();g=this.r.set();g.push(d);g.push(e);
if(c._realx>this.center_point.x){d="start";e=30}else{d="end";e=-30}g.attr({"text-anchor":d,x:c._realx+e,opacity:0});return c._label=g};a.prototype.add_grandchildren=function(b,c){if(b.children){c._children=[];return this.create_circles_along_radius(b.children,this.child_radius,this.outer_radius2,function(){return function(d,e){c._active=false;return c._children.push(e)}}(this))}};a.prototype.draw_circle=function(b,c,d,e){var g,h;g={fill:this.options.fill_color,stroke:"none"};h=this.r.set();h.push(this.r.circle(b,
c,d).attr(g));h.push(this.r.text(b,c,"+").attr({"font-size":e,fill:"#fff"}));return h.attr({cursor:"pointer"}).toFront()};a.prototype.draw=function(){var b;b=this.draw_circle(this.center_point.x,this.center_point.y,this.main_radius,100);b._active=false;b._children=[];this.add_click_to_circle(b,true);this.create_circles_along_radius(this.children,this.child_radius,this.outer_radius,function(c){return function(d,e){c.add_grandchildren(d,e);c.add_click_to_circle(e);return b._children.push(e)}}(this));
return b.toFront()};return a}(v);r.PathMenu=V;var Y,Z;t={}.hasOwnProperty;s=function(f,a){function b(){this.constructor=f}for(var c in a)if(t.call(a,c))f[c]=a[c];b.prototype=a.prototype;f.prototype=new b;f.__super__=a.prototype;return f};Z=function(f,a,b,c,d){var e,g,h;g=360/c*b;e=(90-g)*Math.PI/180;h=f+d*Math.cos(e);e=a-d*Math.sin(e);return{path:c===b?[["M",f,a-d],["A",d,d,0,1,1,f-0.01,a-d]]:[["M",f,a-d],["A",d,d,0,+(g>180),1,h,e]]}};Y=function(f){function a(b){return a.__super__.constructor.call(this,
b,a.DEFAULTS)}s(a,f);a.DEFAULTS={radius:55,stroke_width:30,font_color:"#333333",label_color:"#333333",fill_color:"#fff",stroke_color:"#81ae14",background_color:"#222222",text_shadow:false};return a}(u);u=function(f){function a(b,c,d,e){this.label=c;this.value=d;if(e==null)e={};a.__super__.constructor.call(this,b,new Y(e));this.center_point=new n(this.width/2,this.height/2);this.r.customAttributes.arc=Z}s(a,f);a.prototype.draw=function(){var b;b=this.r.path().attr({"stroke-width":this.options.stroke_width,
stroke:this.options.stroke_color,arc:[this.center_point.x,this.center_point.y,0,100,this.options.radius]});this.r.circle(this.center_point.x,this.center_point.y,this.options.radius).attr({fill:this.options.fill_color,stroke:"none","stroke-width":0});this.r.text(this.center_point.x,this.center_point.y,Math.round(this.value*100/100)+"%").attr({"font-size":this.options.radius/2.5,fill:this.options.font_color,"font-weight":"bold"});this.r.text(this.center_point.x,this.center_point.y+1.8*this.options.radius,
this.label).attr({"font-size":this.options.radius/2.5,"font-weight":"bold",fill:this.options.label_color});this.options.text_shadow&&this.r.text(this.center_point.x,this.center_point.y+1.8*this.options.radius+1,this.label).attr({"font-size":this.options.radius/2.5,"font-weight":"bold",fill:this.options.text_shadow}).toBack();return b.animate({arc:[this.center_point.x,this.center_point.y,this.value,100,this.options.radius]},1500,"<")};return a}(v);r.CircleProgress=u;t={}.hasOwnProperty;s=function(f,
a){function b(){this.constructor=f}for(var c in a)if(t.call(a,c))f[c]=a[c];b.prototype=a.prototype;f.prototype=new b;f.__super__=a.prototype;return f};u=function(f){function a(b,c){if(c==null)c={};a.__super__.constructor.call(this,b,new E(c));this.padding=26;this.all_points=[];this.line_indices=[];this.line_options=[]}s(a,f);a.prototype.add_line=function(b){var c,d,e,g,h;c=b.data;if(!(c.length<1)){e=[];g=0;for(h=c.length;g<h;g++){d=c[g];d.length===3?e.push(new n(d[0],d[1],d[2])):e.push(new n(d[0],
d[1]))}c=this.all_points.length;this.line_indices.push([c,c+e.length-1]);this.all_points.push.apply(this.all_points,e);this.line_options.push(E.merge(this.options,b.options))}};a.prototype.draw_grid=function(b,c){var d,e,g,h,i,j,k;if(b==null)b=[];if(c==null)c=[];i=function(m,l,o){return m.attr({stroke:l,"stroke-width":o})};g=this.options.multi_axis?this.options.x_padding*2:this.options.x_padding;d=this.height-this.options.y_padding;h=this.width-g;g=this.r.set();j=0;for(k=b.length;j<k;j++){e=b[j];
g.push(this.r.path("M "+e+", "+this.options.y_padding+" L "+e+", "+d+" Z"))}j=0;for(k=c.length;j<k;j++){e=c[j];g.push(this.r.path("M "+this.options.x_padding+", "+e+" L "+h+", "+e+" Z"))}if(this.options.multi_axis===true&&this.line_options.length===2){e=this.options.x_padding;e=this.r.path("M "+e+", "+this.options.y_padding+" L "+e+", "+d+" Z");h=this.width-this.options.x_padding*2;d=this.r.path("M "+h+", "+this.options.y_padding+" L "+h+", "+d+" Z");i(e,this.line_options[0].line_color,2).toBack();
i(d,this.line_options[1].line_color,2).toBack()}return i(g,"#ddd",1).toBack()};a.prototype.create_scalers=function(b){var c,d,e,g,h,i,j,k,m;g=void 0;e=void 0;h=void 0;g=void 0;i=void 0;if(this.options.scale==="log"){d=new G;e=function(){var l,o,p;p=[];l=0;for(o=b.length;l<o;l++){j=b[l];p.push(new n(j.x,d(j.y)))}return p}();i=z.get_ranges_for_points(e);e=i[0];h=i[1];g=i[2];i=i[3]}else{i=z.get_ranges_for_points(b);e=i[0];h=i[1];g=i[2];i=i[3]}if(this.options.y_axis_scale.length===2){g=this.options.y_axis_scale;
i=g[0];g=g[1]}k=this.options.multi_axis?this.options.x_padding*2:this.options.x_padding;e=(new B).domain([h,e]).range([this.options.x_padding,this.width-k]);m=(new B).domain([i,g]).range([this.options.y_padding,this.height-this.options.y_padding]);c=function(l){return function(o){return l.height-m(o)}}(this);g=this.options.scale==="log"?function(l){return c(d(l))}:c;return[e,g]};a.prototype.create_scalers_for_single_point=function(){var b;b=function(c){return function(){return 0.5*(c.height-c.options.y_padding)}}(this);
return[function(c){return function(){return 0.5*(c.width-c.options.x_padding)}}(this),b]};a.prototype._draw_y_labels=function(b,c){var d,e,g,h,i,j,k,m;if(c==null)c=0;e=this.options.label_format;k=this.options.y_label_size;g=this.options.font_family;d=this.options.label_color||"#333";h=k+5;j=this.options.multi_axis&&c>0?c:c+h;if(this.options.y_axis_name){j+=k*1.75;h=this.options.axis_name_color||"#333";i=this.options.axis_name_size||k;g=(new y(this.r,5,this.height/2,this.options.y_axis_name,e,i,g,
h)).draw();g.transform("T0,0R270S1");g.transform("...t0,"+g.getBBox().x*-1)}m=this.create_scalers(b)[1];h=[];d=(new C(this.r,e)).x(function(){return j}).y(function(l){return m(b[l].y)}).size(k).color(d);e=0;for(k=b.length;e<k;e++){g=b[e];d.draw(g.y);h.push(m(g.y))}return h};a.prototype.calc_y_label_step_size=function(b,c,d){if(d==null)d=this.options.max_y_labels;b=(c-b)/(d-1);if(c>1){b=Math.round(b);if(b===0)b=1}return b};a.prototype.draw_y_labels=function(b,c){var d,e,g,h,i,j;if(c==null)c=0;g=z.get_ranges_for_points(b);
h=g[2];e=g[3];if(this.options.y_axis_scale.length===2){h=this.options.y_axis_scale;e=h[0];h=h[1]}if(h===e)return this._draw_y_labels([new n(0,h)],c);g=[];if(this.options.scale==="log"){d=new G;j=d(e);d=d(h);d=(d-j)/(this.options.max_y_labels-1);e=e;for(i=0;e<=h&&i<this.options.max_y_labels;){e=Math.pow(10,j+d*i);g.push(new n(0,e));i+=1}}else{j=e;for(d=this.calc_y_label_step_size(e,h);j<=h;){g.push(new n(0,j));j+=d}}if(h>1)g[g.length-1].y=Math.round(h);return this._draw_y_labels(g,c)};a.prototype.draw_x_label=
function(b,c){var d,e,g,h;e=this.options.label_format;h=this.options.x_label_size;g=this.options.font_family;d=this.options.label_color||"#333";return(new y(this.r,c.x,this.options.x_axis_name?this.height-h*2:this.height-h,b.is_date_type===true?new Date(b.x):Math.round(b.x),e,h,g,d)).draw()};a.prototype.draw_x_labels=function(b,c){var d,e,g,h,i,j;g=[];h=this.options.max_x_labels;if(this.options.x_axis_name){d=this.options.axis_name_color||"#333";e=this.options.axis_name_size||this.options.x_label_size;
(new y(this.r,this.width/2,this.height-this.options.x_label_size/2,this.options.x_axis_name,this.options.label_format,e,this.options.font_family,d)).draw()}this.draw_x_label(b[0],c[0]);g.push(c[0].x);if(!(h<2)){d=c.length-1;this.draw_x_label(b[d],c[d]);g.push(c[d].x);if(!(h<3)){d=c.length-1;h=d/(h-1);e=Math.round(h);if(h!==e)h=e+1;for(e=h;e<d;){j=b[e];i=c[e];this.draw_x_label(j,i);g.push(i.x);e+=h}return g}}};a.prototype.draw_line=function(b,c,d){return this.options.render==="bar"?(new S(this.r,b,
c,this.height,this.width,d)).draw():(new T(this.r,b,c,this.height,this.width,d)).draw()};a.prototype.clear=function(){a.__super__.clear.call(this);this.all_points=[];this.line_indices=[];return this.line_options=[]};a.prototype.draw=function(){var b,c,d,e,g,h,i,j,k,m,l,o;if(!(this.all_points.length<1)){this.r.clear();d=this.all_points.length>1?this.create_scalers(this.all_points):this.create_scalers_for_single_point();j=d[0];k=d[1];o=this.line_indices;d=m=0;for(l=o.length;m<l;d=++m){c=o[d];b=c[0];
c=c[1];i=this.all_points.slice(b,+c+1||9E9);if(this.options.multi_axis){b=this.all_points.length>2?this.create_scalers(i):this.create_scalers_for_single_point();e=b[0];g=b[1]}else{e=j;g=k}c=function(){var p,q,w;w=[];p=0;for(q=i.length;p<q;p++){h=i[p];w.push(new n(e(h.x),g(h.y)))}return w}();b=this.line_options[d];this.draw_line(i,c,b);if(d===0){if(this.options.show_x_labels===true)this.x_label_coordinates=this.draw_x_labels(i,c);if(this.options.multi_axis&&this.options.show_y_labels===true)this.y_label_coordinates=
this.draw_y_labels(i);else if(this.options.show_y_labels===true)this.y_label_coordinates=this.draw_y_labels(this.all_points);this.options.show_grid===true&&this.draw_grid(this.x_label_coordinates,this.y_label_coordinates)}else d===1&&this.options.multi_axis&&this.options.show_y_labels===true&&this.draw_y_labels(i,this.width-this.options.x_padding)}}};return a}(v);r.LineChart=u;var $,aa,ba;t={}.hasOwnProperty;s=function(f,a){function b(){this.constructor=f}for(var c in a)if(t.call(a,c))f[c]=a[c];b.prototype=
a.prototype;f.prototype=new b;f.__super__=a.prototype;return f};aa=function(f,a,b){return{label:f,raw_value:a,index_value:b}};ba=function(f,a,b){return{label:f,index_value:a,opacity:b}};$=function(f){function a(b,c){if(c==null)c={};a.__super__.constructor.call(this,b,new Q(c));this.effects=new H(this.r);this.bars=[];this.guides=[];this.index=100}s(a,f);a.prototype.add=function(b,c,d){return this.bars.push(aa(b,c,d))};a.prototype.add_guide_line=function(b,c,d){if(d==null)d=1;return this.guides.push(ba(b,
c,d))};a.prototype.add_raw_label=function(b){var c;c=(new C(this.r)).x(function(d){return function(){return d.width-10}}(this)).y(function(d){return d*15+15}).size(this.options.label_size).attr({fill:"#333","text-anchor":"end","font-weight":"bold"});c.draw(b);return c.draw("(raw value)").attr({"font-weight":"normal","font-size":10})};a.prototype.set_bar_height=function(){return this.bar_height=(this.height-this.options.y_padding)/this.bars.length-this.options.bar_margin};a.prototype.set_threshold=
function(){var b,c;c=function(){var d,e,g,h;g=this.guides;h=[];d=0;for(e=g.length;d<e;d++){b=g[d];h.push(b.index_value)}return h}.call(this);return this.threshold=Math.max.apply(Math.max,c)};a.prototype.format_tooltip=function(b){return b/100+"x"};a.prototype.draw_raw_bar=function(b,c){var d,e;d=Math.floor(7);e=this.options.x_padding_right-10;this.r.rect(this.width-e,c-d,this.width-this.options.x_padding_right,this.bar_height+14,this.options.rounding).attr({fill:this.options.raw_value_bar_color,stroke:"none"});
return this.effects.straight_line(new n(this.width-e,this.options.y_padding-10),new n(this.width-e,this.height)).attr({stroke:"rgba(0,0,0,0.25)","stroke-width":0.1})};a.prototype.draw_bg_bar=function(b,c,d){c(b);c=this.options.bg_bar_padding;b=Math.floor(c/2);return this.r.rect(this.options.x_padding-b,d-b,this.width,this.bar_height+c,this.options.rounding).attr({fill:this.options.bar_bg_color,stroke:"none"}).toBack()};a.prototype.shade_bar=function(b,c){if(c==null)c=this.options.bar1_color;b.attr({fill:c,
stroke:"none"});this.effects.one_px_shadow(b);return this.effects.one_px_highlight(b)};a.prototype.render_bar=function(b,c,d,e){if(e==null)e=this.options.bar1_color;b=this.r.rect(b,c,d,this.bar_height,this.options.rounding);this.shade_bar(b,e);return b};a.prototype.draw_bar=function(b,c,d){var e,g,h;h=c(z.threshold(b,this.threshold));if(b>this.index){e=c(this.index);c=this.render_bar(this.options.x_padding,d,e-this.options.x_padding);d=this.render_bar(e,d,h-e,this.options.bar2_color);g=new D(this.r,
d,this.format_tooltip(b));g.translate(d.getBBox().width/2,0);c.mouseover(function(){return g.show()});return c.mouseout(function(){return g.hide()})}else{d=this.render_bar(this.options.x_padding,d,h-this.options.x_padding);g=new D(this.r,d,this.format_tooltip(b));return g.translate(d.getBBox().width/2,0)}};a.prototype.draw_guide_line=function(b,c,d,e){var g,h;if(e==null)e=1;h=new n(d,this.options.y_padding);g=new n(d,this.height);this.effects.vertical_dashed_line(h,g,this.options.dash_width).attr({fill:"rgba(0,0,0,"+
e+")",stroke:"none"});e=(new C(this.r)).x(function(){return d}).y(function(i){return i*15+15}).size(this.options.label_size).attr({fill:"rgba(0,0,0,"+e+")"});e.draw(b).attr({"font-weight":"bold"});return e.draw(c).attr({"font-size":10})};a.prototype.sort_bars_by_index=function(){var b,c;c=function(){var d,e,g,h;g=this.bars;h=[];d=0;for(e=g.length;d<e;d++){b=g[d];h.push(b)}return h}.call(this);c.sort(function(d,e){return e.index_value-d.index_value});return c};a.prototype.clear=function(){a.__super__.clear.call(this);
this.bars=[];return this.guides=[]};a.prototype.draw=function(){var b,c,d,e,g,h,i,j,k,m,l,o,p;this.set_bar_height();this.set_threshold();h=this.bar_height+this.options.bar_margin;d=this.bar_height/2;m=this.options.y_padding;j=this.options.x_padding;c=(new C(this.r)).y(function(q){return q*h+m+d}).x(function(){return j-30}).size(12).attr({fill:"#fff","text-anchor":"end"});g=(new C(this.r)).y(function(q){return q*h+m+d}).x(function(q){return function(){return q.width-10}}(this)).size(this.options.label_size).attr({fill:"#333",
"text-anchor":"end"});i=(new B).domain([0,this.threshold]).range([this.options.x_padding,this.width-this.options.x_padding_right]);k=function(q){return function(w){return w*(q.bar_height+q.options.bar_margin)+q.options.y_padding}}(this);p=this.sort_bars_by_index();e=l=0;for(o=p.length;l<o;e=++l){b=p[e];this.draw_bg_bar(b.index_value,i,k(e));this.draw_raw_bar(b.raw_value,k(e));this.draw_bar(b.index_value,i,k(e));g.draw(b.raw_value);b=c.draw(b.label);this.effects.black_nub(b)}l=this.guides;o=[];g=0;
for(k=l.length;g<k;g++){c=l[g];o.push(this.draw_guide_line(c.label,c.index_value,i(c.index_value),c.opacity))}return o};return a}(v);r.IndexChart=function(f,a){return new $(f,a)};var A;t={}.hasOwnProperty;s=function(f,a){function b(){this.constructor=f}for(var c in a)if(t.call(a,c))f[c]=a[c];b.prototype=a.prototype;f.prototype=new b;f.__super__=a.prototype;return f};A=function(f,a,b,c){return{label:f,value:a,average:b,comparison:c}};u=function(f){function a(b,c){if(c==null)c={};a.__super__.constructor.call(this,
b,new P(c));this.bars=[]}s(a,f);a.prototype.add=function(){return this.bars.push(A.apply(A,arguments))};a.prototype.draw_background=function(b,c){return this.r.rect(this.options.x_padding,c,b.x,this.options.area_width).attr({fill:this.options.area_color,stroke:"none"})};a.prototype.draw_line=function(b,c){return this.r.rect(this.options.x_padding,c.y-this.options.line_width/2,b.x,this.options.line_width).attr({fill:this.options.line_color,stroke:"none"})};a.prototype.draw_average=function(b,c){return this.r.rect(b.x-
this.options.average_width/2,c-this.options.average_height/2,this.options.average_width,this.options.average_height).attr({fill:this.options.average_color,stroke:"none"})};a.prototype.draw_label=function(){};a.prototype.clear=function(){a.__super__.clear.call(this);return this.bars=[]};a.prototype.draw=function(){var b,c,d,e,g,h,i,j,k,m;k=this.bars;m=[];b=i=0;for(j=k.length;i<j;b=++i){A=k[b];e=[new n(A.comparison,0),new n(A.value,0),new n(A.average,0),new n(0,0)];d=z.get_ranges_for_points(e);c=d[0];
d=d[1];h=(new B).domain([d,c]).range([this.options.x_padding,this.width-this.options.x_padding]);c=function(){var l,o,p;p=[];l=0;for(o=e.length;l<o;l++){g=e[l];p.push(new n(h(g.x),0))}return p}();d=b*(this.options.area_width+this.options.bar_margin);this.draw_background(c[0],d);b=d+this.options.area_width/2;this.draw_line(c[1],new n(c[0].x,b));this.draw_average(c[2],b);m.push((new y(this.r,0,d+this.options.area_width/2,A.label,"",this.size=14,this.options.font_family)).draw())}return m};return a}(v);
r.BulletChart=u;t={}.hasOwnProperty;s=function(f,a){function b(){this.constructor=f}for(var c in a)if(t.call(a,c))f[c]=a[c];b.prototype=a.prototype;f.prototype=new b;f.__super__=a.prototype;return f};v=function(f){function a(b,c){if(c==null)c={};a.__super__.constructor.call(this,b,new F(c));this.effective_height=this.height-this.options.y_padding;this.bar_options=[];this.bars=[];this.values=[]}s(a,f);a.prototype.add=function(b){var c,d;c=b.label;d=b.value;this.bar_options.push(F.merge(this.options,
b.options));this.values.push(d);return this.bars.push({label:c,value:d})};a.prototype.render_bar=function(b,c,d,e){this.r.rect(d.x,d.y,this.options.bar_width,this.effective_height-d.y,this.options.rounding).attr({fill:e.bar_color,stroke:"none"});(new y(this.r,d.x+this.options.bar_width/2,this.height-(this.options.x_label_size+5),b,"",this.options.x_label_size,this.options.font_family,this.options.x_label_color)).draw();return(new y(this.r,d.x+this.options.bar_width/2,d.y-this.options.y_label_size-
5,c,"",this.options.y_label_size,this.options.font_family,this.options.y_label_color)).draw()};a.prototype.clear=function(){a.__super__.clear.call(this);this.bars=[];return this.values=[]};a.prototype.draw=function(){var b,c,d,e,g,h,i,j,k,m,l,o;e=function(){var p,q,w,K;w=this.values;K=[];c=p=0;for(q=w.length;p<q;c=++p){i=w[c];K.push(new n(c,i))}return K}.call(this);e.push(new n(0,0));d=z.get_ranges_for_points(e);b=d[2];d=d[3];j=(new B).domain([d,b]).range([this.options.y_padding,this.height-this.options.y_padding]);
d=function(p){return function(q){return p.height-j(q)}}(this);l=this.bars;o=[];c=k=0;for(m=l.length;k<m;c=++k){b=l[c];g=c*(this.options.bar_width+this.options.bar_spacing)+this.options.x_padding;h=d(e[c].y);g=new n(g,h);o.push(this.render_bar(b.label,b.value,g,this.bar_options[c]))}return o};return a}(v);r.BarChart=v});})();
